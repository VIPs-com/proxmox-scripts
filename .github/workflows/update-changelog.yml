name: Update CHANGELOG

on:
  workflow_dispatch: # Roda manualmente
  push:
    branches: [ main ]
    paths: 
      - 'proxmox-postinstall-aurora-luna.sh' # SÃ³ atualiza quando o script principal mudar

jobs:
  update-changelog:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Git
      run: |
        git config --global user.name "GitHub Actions"
        git config --global user.email "actions@github.com"
        
    - name: Update CHANGELOG
      run: |
        echo "## [$(date +'%Y-%m-%d')] - AtualizaÃ§Ã£o AutomÃ¡tica" >> CHANGELOG.md
        echo "### Alterado" >> CHANGELOG.md
        echo "- Script atualizado via GitHub Actions" >> CHANGELOG.md
        echo "" >> CHANGELOG.md
        
    - name: Commit Changes
      run: |
        git add CHANGELOG.md
        git commit -m "ðŸ“œ Atualiza CHANGELOG automaticamente"
        git push
